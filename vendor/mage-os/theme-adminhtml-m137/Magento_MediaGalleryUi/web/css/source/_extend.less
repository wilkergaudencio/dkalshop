//
//  Variables
//  _____________________________________________

// @color-folders-background: #a6a6a6;
@color-folders-background-selected: @neutral-90;
// @color-folders-border: #7185f5;
// @color-masonry-overlay: #d9631c;
// @color-masonry-grey: #9e9e9e;
@color-masonry-white: transparent;
// @color-masonry-steelblue: #4682b4;
@color-media-gallery-buttons-background: unset;
@color-media-gallery-buttons-border: unset;
@color-media-gallery-buttons-text: unset;
@color-media-gallery-checkbox-background: @neutral-95;
// @color-media-gallery-scrollbar-background: #fff;

//
//  Media gallery
//  _____________________________________________

.main-col {
    > .media-gallery-container {
        .lib-clearfix();

        border-radius: @radius__l;
        padding: @indent__l;
        background-color: @color-white;
        
        .admin__data-grid-header {
            .admin__data-grid-header-row {
                & + .admin__data-grid-header-row {
                    padding-top: 0;
                    padding-right: 0;
                    padding-left: 0;
                }
            }
        }

        .admin__data-grid-outer-wrap {
            .message {
                margin-top: 0;
            }
        }
    }
}

//
//  Media gallery columns
//  _____________________________________________

.media-gallery-container {
    .media-directory-container {
        width: 18%;
        padding-right: 0;
    }

    .masonry-image-grid {
        width: ~'calc(82% - @{indent__xl})';
        grid-template-columns: repeat(auto-fill, 200px);
        justify-content: space-evenly;
        float: right;
        margin: 0;
        gap: @indent__base;
    }
}

//
//  Media gallery image
//  _____________________________________________

.media-gallery-container {
    .masonry-image-grid {
        padding: @indent__3xs;
        margin: 0;
    }

    .messages {
        margin-bottom: 0;
    }

    .masonry-image-column {
        margin: 0;
        overflow: visible;
    }

    .media-gallery-image-block {
        overflow: hidden;
        border: .1rem solid @neutral-70;
        border-radius: @radius__xs;
        transition: @smooth__border-color, @smooth__box-shadow;

        &:hover {
            border-color: @blue-50;
        }

        &.selected {
            border-width: .1rem;
            border-color: @blue-50;
            box-shadow: 0 0 0 .1rem @field-control__active__border-color;
        }
    }
    
    .media-gallery-image {
        margin-bottom: @indent__m;

        img {
            padding: 0;
        }

        .action-menu {
            margin-bottom: @indent__3xs;
            margin-right: @indent__3xs;
        }
    }

    .masonry-image-description {
        padding-top: 0;
    }

    .media-gallery-image-details {
        width: 100%;
        padding-right: @indent__xl;

        .name {
            font-size: @font-size__base;
            color: @neutral-30;
            font-weight: @font-weight__heavier;
            margin-bottom: @indent__xs;
            padding-bottom: 0;
        }

        .type {
            font-size: @font-size__base;
            text-transform: lowercase;
            padding-bottom: 0;
        }

        .type,
        .dimensions,
        .source {
            color: @neutral-40;
        }
    }
    
    .media-gallery-image-actions {
        width: auto;

        .three-dots {
            .lib-icon-font(
            @icon-more-horizontal__content,
            @_icon-font: @icons-admin__font-name,
            @_icon-font-size: 2.4rem,
            @_icon-font-color: @neutral-10,
            @_icon-font-color-hover: @neutral-20,
            @_icon-font-color-active: @neutral-20,
            @_icon-font-line-height: 1
            );
        }
    }
}

//
//  Media gallery checkbox
//  _____________________________________________

.mediagallery-massaction-checkbox {
    width: auto;
    height: auto;
    border-radius: @radius__xs;
    margin-left: @indent__m;
    margin-top: @indent__m;
    line-height: 0;
    
    input[type='checkbox'] {
        padding: @indent__s;
        margin-top: 0;
        margin-left: 0;
        line-height: 0;
        appearance: none;
        cursor: pointer;

        .lib-icon-font (
        @_icon-font-content: ' ',
        @_icon-font: @icons-admin__font-name,
        @_icon-font-size: 1.2rem,
        @_icon-font-line-height: 1.3,
        @_icon-font-color: @file-uploader-delete-icon__color
        );

        &::before {
            background-color: @control-checkbox-radio__background-color;
            border: .1rem solid @field-control__border-color;
            border-radius: @field-control__border-radius;
            transition: @smooth__background-color, @smooth__border-color;
            width: 1.8rem;
            height: 1.8rem;
        }

        &:hover {
            &::before {
                border-color: @control-checkbox-radio__focus__background-color;
            }
        }

        &:checked {
            .lib-icon-font-symbol(
            @icon-check-mage__content
            );

            &::before {
                background-color: @control-checkbox-radio__focus__background-color;
                border-color: @control-checkbox-radio__focus__background-color;
                color: @control-checkbox-radio-mark__focus__color;
            }
        }
    }
}

//
//  Media gallery jstree
//  _____________________________________________

.media-gallery-container {
    .jstree a {
        height: unset;
        margin: 0;
    }

    .jstree-default {
        .jstree-node {
            .jstree-anchor {
                display: inline-flex;
                align-items: center;
                
                .jstree-icon {
                    width: 2rem;
                    height: 2rem;
                    margin-right: .6rem;
                    margin-top: 0;
                }
            }
        }

        .jstree-clicked {
            background: @color-folders-background-selected;
            border: 0;
        }
    }

    .jstree-default > .jstree-no-dots {
        .jstree-node  {
            .jstree-icon {
                background-position: 50% 50% !important;
            }
        }
    }
}

//
//  Media gallery sort by
//  _____________________________________________

.media-gallery-container {
    .page-main-actions {
        margin-top: 0;
        margin-bottom: @indent__base;
    }
    
    .admin__data-grid-header {
        position: relative;

        .data-grid-search-control-wrap {
            position: absolute;
            top: 0;
        }

        .masonry-image-sortby {
            position: relative;
            background-color: @neutral-95;
            border-radius: @radius__xl;

            &::before {
                position: absolute;
                left: @indent__base;
                top: .9rem;
                background-image: url('@{baseDir}Magento_MediaGalleryUi/images/sort.svg');
                background-position: 0 50%;
                background-repeat: no-repeat;
                background-size: 1.8rem;
                content: '';
                width: 1.8rem;
                height: 1.8rem;
                display: inline-block;
            }

            > b {
                display: none;
            }

            .admin__control-select {
                padding-top: @indent__s;
                padding-bottom: @indent__s;
                background-color: unset;
                font-weight: @font-weight__heavier;
                color: @neutral-10;
                padding-left: 4.2rem;
            }
        }
        
        .admin__data-grid-filters-current {
            padding: 0;

            + .admin__data-grid-filters-wrap {
                &._show {
                    margin-top: @indent__base;
                    padding-top: 0 0 @indent__s 0;
                }
            }
        }
    }

    .admin__data-grid-filters {
        .admin__form-field {
            .action-select-wrap {
                .action-menu {
                    width: auto;
                }
            }

            .admin__action-multiselect-search-label {
                right: 0 !important;
            }

            .action-close {
                &::before {
                    font-size: unset;
                }
            }
        }

        .action-close {
            padding: 0;
        }
    }
}

//
//  Media gallery actions
//  _____________________________________________

.page-main-actions {
    .page-actions  {
        .action-primary.media-gallery-add-selected,
        .primary.massaction-buttons.cancel {
            margin-left: @indent__base;
        }
        
        .action-default.media-gallery-actions-buttons  {
            background-color: @button-quaternary__background-color;
            color: @button-quaternary__color;
        
            &:hover {
                background-color: @button-quaternary__hover__background-color;
                color: @button-quaternary__hover__color;
            }
            
            &:active,
            &:focus {
                background-color: @button-quaternary__active__background-color;
                color: @button-quaternary__active__color;
            }
        }
    }
}

//
//  Media gallery filter crumb
//  _____________________________________________

.media-gallery-asset-ui-select-filter,
.edit-image-details {
    .admin__action-multiselect-crumb {
        overflow: unset;
    }
}

//
//  Media gallery modal
//  _____________________________________________

.media-gallery-image-details-modal,
.media-gallery-edit-image-details-modal {
    .admin__action-multiselect-crumb {
        .action-close {
            &::before {
                font-size: unset;
            }
        }
    }

    .page-main-actions {
        .action-default.save {
           &:extend(.abs-action-primary all);
            margin-left: @indent__base;
        }
        
        .action-primary {
            margin-left: @indent__base;
        }
    }

    .image-details {
        .image-details-image {
            img {
                max-height: unset;
            }
        }

        .image-details-sidebar {
            -ms-flex: 0 0 50%;
            -webkit-box-flex: 0;
            -webkit-flex: 0 0 50%;
            flex: 0 0 50%;
            padding-left: @indent__xl;
        }
    }
}
